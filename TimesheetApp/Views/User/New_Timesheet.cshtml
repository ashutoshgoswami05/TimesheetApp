@model TimesheetApp.Timesheets

@{
    ViewBag.Title = "New_Timesheet";
    SelectList Projects = new SelectList(ViewBag.Projects, "Project_Name", "Project_Name");
}
<link href="~/bootstrap/datepicker.css" rel="stylesheet" />
<script src="~/bootstrap/bootstrap-datepicker.js"></script>


@using (Html.BeginForm("New_Timesheet", "User", FormMethod.Post, new { id = "TimesheetForm", @class = "commonForm" }))
{
    <h2 class="text-center">New Timesheet</h2>
    <input type="hidden" value="@HttpContext.Current.User.Identity.Name" name="User" />

    @Html.DisplayName("Project")



    @Html.DropDownListFor(x => x.Project_Name, Projects, new { @class = "form-control" })

    <br />
    @Html.Label("Date")
    @Html.TextBoxFor(x => x.date, new { @class = "form-control", id = "selectdate", @readonly = "readonly" })
    <br />

    @Html.Label("Timespent")
    <input type="time" name="TimeSpent" class="form-control" />
    <br />

    @Html.DisplayNameFor(x => x.Wokrdone)
    @Html.TextAreaFor(x => x.Wokrdone, new { @class = "form-control" })
    <br />

    @Html.DisplayName("Mode")
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="Mode" id="exampleRadios1" value="false">
        <label class="form-check-label" for="exampleRadios1">
            WFH
        </label>
    </div>
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="Mode" id="exampleRadios2" value="true" >
        <label class="form-check-label" for="exampleRadios2">
            Office
        </label>
    </div>
    <br />



    <input type="button" id="btn-Timesheet" class="btn btn-info btn-submit" value="Create" />




}

<script>
    $('#selectdate').datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm/yyyy",
        language: "tr"
    });

     $('#btn-Timesheet').click(function () {
        var formdata = $('#TimesheetForm').serialize();
        console.log(formdata);
         $.ajax({

            url: '@Url.Action("New_Timesheet","User")',
             type: "POST",
             data: formdata,
             success: function (response) {
                 if (response.Message === "Success") {
                     swal("Success!", "Timesheet Created!", "success");
                     console.log(response)
                     $('#TimesheetForm')[0].reset();
                 }
             },
             failure: function () {
                 alert('cannot create');
             }

    })
     })


</script>